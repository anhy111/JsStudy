<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
<script>
    // 외부에 자신들의 서비스 사용법을 알려준다고 해서 Open API라고 부름
    // API(Application Program Interface)
    // 데이터를 많이 가진 회사들은 다 이 서비스로 돈을 벌고 있음

    function jsonFlickrFeed(p_arg){
        var v_items = p_arg.items;
        v_disp.innerHTML = "";
        for(var i=0; i<v_items.length; i++){
            var v_img = document.createElement("img");
            v_img.src = v_items[i].media.m;
            v_disp.appendChild(v_img);
            // console.log(v_items[i].media.m);
        }
    }
</script>
</head>
<body>
    <input type="text" id="id_schWord" value="" >
    <input type="button" value="이미지검색" id="id_schBtn">
    <div id="id_disp"></div>
<script>
    var v_schWord = document.querySelector("#id_schWord"); //text box
    var v_schBtn = document.querySelector("#id_schBtn");  // button
    var v_disp = document.querySelector("#id_disp");    // 출력 div
    var v_preUrl = "https://www.flickr.com/services/feeds/photos_public.gne?tags=";
    var v_postUrl = "&format=json";
    function f_search(){
        var v_targetUrl = v_preUrl + v_schWord.value + v_postUrl;
        var v_script = document.querySelector("#flickr");
        if(v_script){
            document.head.removeChild(v_script);
        }
        v_script = document.createElement("script");
        v_script.id = "flickr";
        v_script.src = v_targetUrl;
        document.head.appendChild(v_script);
    }
    v_schBtn.onclick = f_search;    //이벤트 발생시 실행하도록 FP를 넘긴다.

    v_schWord.addEventListener("keydown", function(){
        if(event.keyCode == 13){
            f_search();
        }
    });
    
</script>
<!-- <script src="https://www.flickr.com/services/feeds/photos_public.gne?tags=cat&format=json"> -->

</script>    
</body>
</html>