<!DOCTYPE html>
<meta charset="UTF-8">
<!--이 페이지는 사용자에게 보여지는 내용은 없음
    지금부터 하는 내용은 사기에 가까움
-->
<script src="gesilib.js"></script>
<script>

    
    var v_title = request.getParameter("nm_title");
    var v_writer = request.getParameter("nm_writer");
    var v_level = request.getParameter("nm_level");
    var v_cats = request.getParameterValues("nm_cat");
    var v_content = request.getParameter("nm_content").replaceAll("+"," ");

    var v_arrTotal = [];
    var v_pid = 1;     //없을 때 초기값

    // primary-key(검색을 빠르게 -> 기본키(식별키))
    if(localStorage.getItem(v_tblName)){
        v_arrTotal = JSON.parse(localStorage.getItem(v_tblName));
        v_pid = v_arrTotal[v_arrTotal.length - 1].pid + 1;
    }
    var v_gul = {};     
    v_gul.pid = v_pid;
    v_gul.title = v_title;
    v_gul.writer = v_writer;
    v_gul.level = v_level;
    v_gul.cats = v_cats;
    v_gul.content = v_content;
    v_arrTotal.push(v_gul); 

    localStorage.setItem(v_tblName,JSON.stringify(v_arrTotal));

    // 사용자에게 쓰기 성공했다고 알려줌
    alert("글이 잘 등록됫다.")
    location.replace("17list.html");
</script>